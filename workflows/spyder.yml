name: Daily PTT Spider

on:
  schedule:
    - cron: '0 0 * * *'   # æ¯å¤© 00:00 UTCï¼ˆå°ç£æ™‚é–“æ—©ä¸Š 8:00ï¼‰æ ¼å¼ï¼šåˆ† æ™‚ æ—¥ æœˆ æ˜ŸæœŸ
  workflow_dispatch:       # å…è¨±æ‰‹å‹•è§¸ç™¼

jobs:
  run-spider:
    runs-on: ubuntu-latest

    steps:  
    # æŠŠä½ é€™å€‹ repo çš„å…§å®¹ clone ä¸‹ä¾†ï¼Œæ‰èƒ½åŸ·è¡Œ .py æª”
    - name: Checkout code    
      uses: actions/checkout@v3

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'  # æŒ‡å®š Python ç‰ˆæœ¬

    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    - name: Run PTT Spider
      run: python static.py

    - name: Upload result (CSV)
      uses: actions/upload-artifact@v4        # å®˜æ–¹æä¾›çš„ä¸Šå‚³å·¥å…·
      with:
        name: ptt-result
        path: static.csv
'''
â± Cron Schedule + ğŸ‘† æ‰‹å‹•é»æ“Š
        â†“
ğŸ’» å– repo åŸå§‹ç¢¼ï¼ˆcheckoutï¼‰
        â†“
ğŸ å»ºç«‹ Python ç’°å¢ƒ
        â†“
ğŸ“¦ å®‰è£å¥—ä»¶
        â†“
â–¶ï¸ åŸ·è¡Œä½ çš„çˆ¬èŸ²ç¨‹å¼
        â†“
ğŸ“ åŒ¯å‡º CSV ä¸¦ä¸Šå‚³ç‚º artifact å¯ä¾›ä¸‹è¼‰
'''